model:
  backbone:
    config: mit_b1
    stride:
    - 4
    - 2
    - 2
    - 1
  n_ratio: 0.5
  num_prototypes_per_class: 3
  prototype_feature_dim: 512
  enable_text_fusion: true
  fusion_dim: 512
  learnable_text_prompt: true
  prompt_init_scale: 0.02
  text_prompts:
  - Histopathology patch showing invasive tumor epithelium.
  - Histopathology patch rich in fibrous stroma and connective tissue.
  - Histopathology patch dominated by lymphocytes and immune cells.
  - Histopathology patch with necrotic tissue and cellular debris.
dataset:
  name: bcss
  train_root: ./data/BCSS-WSSS/train
  val_root: ./data/BCSS-WSSS/
  cls_num_classes: 4
  input_size:
  - 224
  - 224
work_dir:
  ckpt_dir: checkpoints
  pred_dir: predictions
  train_log_dir: train_log
train:
  samples_per_gpu: 10
  epoch: 8
  warmup_iters: 3000
  pretrained: true
  l1: 0.0
  l2: 0.1
  l3: 1.0
  l4: 1.0
  l5: 0.1
  lambda_j: 0.50
  l_fuse: 1.0
  diversity:
    omega_window: 7
    omega_min_mass: 0.05
    debug: true
    debug_every: 500
  mask_adapter_alpha: 0.5
  merge_train: mean
  merge_test: max
optimizer:
  type: AdamW
  learning_rate: 0.00005
  betas:
  - 0.9
  - 0.999
  weight_decay: 0.001
scheduler:
  warmup_iter: 0
  warmup_ratio: 1.0e-06
  power: 1.0
